<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n" 
      metal:use-macro="backend"
      i18n:domain="c3smembership">
  <tal:block metal:fill-slot="css">
    <link rel="stylesheet" href="${request.static_url('deform:static/css/form.css')}"
          type="text/css" media="screen" charset="utf-8" />
    <link rel="stylesheet" href="${request.static_url('deform:static/css/typeahead.css')}"
          type="text/css" media="screen" charset="utf-8" />
    <!--! jquery and deform.js need to be on top for autocomplete -->
    <script src="${request.static_url('c3smembership:static/jquery-2.0.3/jquery-2.0.3.min.js')}"
            type="text/javascript"></script>
    <!-- Krissik -->
    <script type="text/javascript">
        $().ready(function() {
            console.debug("ready");
            $(".import-takes-time").click(function(event) {
                answer = confirm("Import might take a litte while. Are you ready to wait? You will be redirected once finished. (521 entries take about 45 secs)");
                if(answer == false) {
                    event.preventDefault();
                }
            });
        });
    </script>
    <!-- /Krissik -->
    <script src="${request.static_url('deform:static/scripts/deform.js')}"
            type="text/javascript"></script>
  </tal:block>    <!--! javascripts -->
  <tal:block metal:fill-slot="middle">
    <div style="text-align:left;">
      <strong style="color:red;" tal:repeat="message request.session.pop_flash('message_to_staff')">
	${message}
      </strong>
    </div>
    <h1>Toolbox</h1>
      <a href="${request.route_url('stats')}"
         class="btn btn-warning">Statistics</a>

    <h3>Export &amp; Import</h3>
    <p>    
      <a href="${request.route_url('export_all')}"
         class="btn btn-primary">Export All (.csv)</a>
      <a href="${request.route_url('export_yes_emails')}"
         class="btn btn-primary">Export AfM Emails (sig. &amp; paym. confirmed) (.csv)</a>
    </p>
    <p>
      <a href="${request.route_url('import_all')}"
         class="btn btn-warning">Import from csv (don't care for ids)(./import.csv)</a>
      <br />
      <a href="${request.route_url('import_with_ids')}"
         class="btn btn-warning">Import from csv (try to preserve ids)(./import.csv)</a>
      <br />
      <a href="${request.route_url('import_all')}"
         class="btn btn-warning">Import (./import.csv)</a>
      <br />
      <a href="${request.route_url('import_founders')}"
         class="btn btn-warning">Import (./founders.csv)</a>
      <br />
      <a href="${request.route_url('import_crowdfunders')}"
         class="btn btn-warning import-takes-time">Import (./crowdfunders.csv)</a>
    </p>
    <h3>Applications for Membership</h3>
    <p>    
      <a href="${request.route_url('dashboard',number=0, orderby='id', order='asc')}"
         class="btn btn-primary">AfM Dashboard</a>
      <a href="${request.route_url('delete_afms')}"
         class="btn btn-danger">Delete a range of AfMs from the Dashboard</a>
    </p>
    <h3>Memberships</h3>
    <p>    
      <a href="${request.route_url('membership_listing',number=0, orderby='id', order='asc')}"
         class="btn btn-primary">Show Memberships</a>
    </p>
    <h3>Staff</h3>
    <p>    
      <a href="${request.route_url('staff')}"
         class="btn btn-primary">Show Staff</a>
    </p>
    <h3>Done?</h3>
    <p>    
      <a href="${request.route_url('dashboard_only')}"
         class="btn btn-primary">Back to Dashboard</a>
    </p>
  </tal:block>
</html>
