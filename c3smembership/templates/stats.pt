<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="backend"
      i18n:domain="c3smembership">
  <tal:block metal:fill-slot="middle">
    <h1>Statistiken</h1>
    <h3><small>Anzahl</small> Mitgliedschaftsanträge, Anteile, etc.</h3>
    <p>
      ${_number_of_datasets} DB-Einträge
      <small>Eingegangene Mitgliedschaftsanträge</small><br />
      ${afm_shares_unpaid} Anteile, die noch nicht bezahlt sind.
      Summe: ${python: int(afm_shares_unpaid)*50}€
      <br />
      ${afm_shares_paid} Anteile, die schon bezahlt sind.
      Summe: ${python: int(afm_shares_paid)*50}€<br />
    </p>
    <h3>Länder</h3>
    Angaben ohne Gewähr auf Richtigkeit.<br />
    Anzahl verschiedener Länder: ${num_countries}
    <table>
      <tr><td>country</td><td>number</td></tr>
      <tr tal:repeat="country countries_list.keys()">
        <td>${country}</td><td>${countries_list[country]}</td></tr>
    </table>
    
    <h3>GenossInnen/Mitgliedschaften</h3>
    <p>erfordert merge</p>
    <p>
      Anzahl GenossInnen: $ off {num_memberships}<br />
      Anzahl natürliche Personen: $ off {num_ms_nat}<br />
      Anzahl juristische Personen: $ off {num_ms_jur}<br />
      Anzahl normale Mitgliedschaften: $ off {num_ms_norm}<br />
      Anzahl invest. Mitgliedschaften: $ off {num_ms_inves}<br />
      Anzahl Anteile: $ off {num_shares}<br />
    </p>
    <!-- XXX TODO h5>Auflistung nach PLZ u. Land</h5 --> 
    <h3>Staff</h3>
    <p>
      Wie viele Accounts gibt es? ${num_staff}<br />
      Welche genau? siehe
      <a href="${request.route_url('staff')}"
         class='btn btn-primary'>Staff
      </a>
      <br />
      ...          
    </p>
  </tal:block>
  <tal:block metal:fill-slot="bottom">
    <div class="hidden-print">
      <p>
        <a href="${request.route_url('dashboard_only')}"
            class="btn btn-primary">Dashboard</a>
        <a href="${request.route_url('membership_listing',number=0,orderby='id',order='asc')}"
           class="btn btn-success">Memberships</a>
        <a href="${request.route_url('logout')}" class="btn btn-danger">Abmelden</a>
      </p>
    </div>
  </tal:block>
</html>
